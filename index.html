<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riteek's YouTube Pro | Full Stack Portfolio</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        :root { --yt-bg: #0f0f0f; --yt-white: #ffffff; --yt-border: #3f3f3f; --yt-red: #ff0000; --yt-card: #1e1e1e; }
        body { background-color: var(--yt-bg); color: var(--yt-white); font-family: 'Roboto', sans-serif; overflow-x: hidden; }
        
        /* Layout */
        .navbar { background-color: var(--yt-bg); height: 65px; border-bottom: 1px solid #333; z-index: 1000; }
        .sidebar { height: calc(100vh - 65px); border-right: 1px solid #333; position: sticky; top: 65px; overflow-y: auto; }
        .sidebar-item { padding: 12px 20px; border-radius: 10px; cursor: pointer; transition: 0.2s; display: flex; align-items: center; margin-bottom: 4px; }
        .sidebar-item:hover, .sidebar-item.active { background: #272727; }
        .sidebar-item i { font-size: 1.2rem; margin-right: 20px; }

        /* Search Bar */
        .search-box { background: #121212; border: 1px solid var(--yt-border); color: white; border-radius: 40px 0 0 40px; }
        .search-btn { background: #222222; border: 1px solid var(--yt-border); color: white; border-radius: 0 40px 40px 0; }

        /* Video Cards */
        .video-card { cursor: pointer; }
        .thumb-wrapper { position: relative; border-radius: 12px; overflow: hidden; background: #222; aspect-ratio: 16/9; }
        .thumb-img { width: 100%; height: 100%; object-fit: cover; }
        
        /* Shorts View */
        .shorts-container { display: flex; flex-direction: column; align-items: center; gap: 20px; padding: 20px; }
        .short-card { width: 320px; height: 560px; background: #000; border-radius: 15px; position: relative; overflow: hidden; }

        /* Player Section */
        .player-container { display: none; margin-bottom: 2rem; animation: fadeIn 0.5s; }
        .video-iframe-wrapper { position: relative; padding-bottom: 56.25%; height: 0; border-radius: 15px; overflow: hidden; }
        .video-iframe-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .pointer { cursor: pointer; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="authSection">
    <div class="card p-4 text-dark" style="width: 380px; border-radius: 15px; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10000;">
        <div class="text-center mb-4">
            <i class="bi bi-youtube text-danger" style="font-size: 3rem;"></i>
            <h3>Welcome Back</h3>
            <p class="text-muted small">Enter any name to start</p>
        </div>
        <div class="mb-3">
            <input type="text" id="userName" class="form-control" placeholder="Your Name">
        </div>
        <button onclick="initApp()" class="btn btn-danger w-100 py-2 fw-bold">Sign In</button>
    </div>
    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 9999;"></div>
</div>

<nav class="navbar sticky-top px-3">
    <div class="container-fluid d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center">
            <i class="bi bi-list fs-3 me-3 pointer" onclick="toggleSidebar()"></i>
            <h4 class="mb-0 text-white fw-bold d-flex align-items-center pointer" onclick="showSection('home')">
                <i class="bi bi-youtube text-danger fs-2 me-1"></i>YouTube
            </h4>
        </div>

        <div class="d-flex flex-grow-1 justify-content-center px-5 d-none d-md-flex">
            <div class="input-group" style="max-width: 600px;">
                <input type="text" id="searchInput" class="form-control search-box" placeholder="Search">
                <button class="btn search-btn" onclick="handleSearch()"><i class="bi bi-search"></i></button>
            </div>
        </div>

        <div class="d-flex align-items-center gap-3">
            <div class="dropdown">
                <div id="userInitials" class="rounded-circle bg-info text-white text-center fw-bold pointer" 
                     style="width: 35px; height: 35px; line-height: 35px;" data-bs-toggle="dropdown">R</div>
                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-dark">
                    <li><a class="dropdown-item" href="#" onclick="showSection('profile')"><i class="bi bi-person me-2"></i> Profile</a></li>
                    <li><a class="dropdown-item" href="#" onclick="showSection('settings')"><i class="bi bi-gear me-2"></i> Settings</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item text-danger" href="#" onclick="location.reload()"><i class="bi bi-box-arrow-right me-2"></i> Logout</a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<div class="container-fluid">
    <div class="row">
        <div class="col-md-2 d-none d-md-block sidebar py-3" id="sidebar">
            <div class="sidebar-item active" onclick="showSection('home')"><i class="bi bi-house-door"></i> Home</div>
            <div class="sidebar-item" onclick="showSection('shorts')"><i class="bi bi-play-circle"></i> Shorts</div>
            <div class="sidebar-item" onclick="showSection('subs')"><i class="bi bi-collection-play"></i> Subscriptions</div>
            <hr class="border-secondary">
            <div class="sidebar-item" onclick="showSection('history')"><i class="bi bi-clock-history"></i> History</div>
            <div class="sidebar-item" onclick="showSection('liked')"><i class="bi bi-hand-thumbs-up"></i> Liked Videos</div>
            <div class="sidebar-item" onclick="showSection('settings')"><i class="bi bi-gear"></i> Settings</div>
        </div>

        <div class="col-md-10 py-4 px-md-4" id="mainContent">
            
            <div id="playerSection" class="player-container">
                <div class="video-iframe-wrapper shadow-lg">
                    <div id="ytPlayer"></div>
                </div>
                <div class="mt-3">
                    <h4 id="currentTitle" class="fw-bold"></h4>
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="d-flex align-items-center">
                            <div class="rounded-circle bg-primary me-2" style="width: 40px; height: 40px;"></div>
                            <div>
                                <h6 class="mb-0 fw-bold" id="currentChannel">Channel Name</h6>
                                <small class="text-secondary">1.2M subscribers</small>
                            </div>
                            <button class="btn btn-light btn-sm rounded-pill ms-3 px-3">Subscribe</button>
                        </div>
                        <div class="d-flex gap-2">
                            <button class="btn btn-dark rounded-pill" onclick="toggleLike()"><i class="bi bi-hand-thumbs-up" id="likeIcon"></i> <span id="likeBtnText">Like</span></button>
                            <button class="btn btn-dark rounded-pill"><i class="bi bi-share"></i> Share</button>
                        </div>
                    </div>
                </div>
                <hr class="border-secondary">
            </div>

            <div id="sectionTitle" class="mb-4 d-none"><h4 class="fw-bold">Section Name</h4></div>
            
            <div id="videoGrid" class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 row-cols-xl-4 g-4">
                </div>

            <div id="shortsGrid" class="shorts-container hidden">
                </div>

            <div id="profileSection" class="hidden text-center py-5">
                <div class="rounded-circle bg-info d-inline-block mb-3" style="width: 100px; height: 100px; font-size: 3rem; line-height: 100px;" id="largeProfileIcon">R</div>
                <h2 id="profileNameDisplay">User Name</h2>
                <p class="text-secondary">@riteek_fullstack_dev</p>
                <button class="btn btn-outline-light rounded-pill px-4">Edit Profile</button>
            </div>

        </div>
    </div>
</div>
<script src="YoutubeKey.js"></script>
<script src="https://www.youtube.com/iframe_api"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Configuration & State
    // Add your YouTube Data API V3 key
    let player;
    let state = {
        user: { name: 'Guest' },
        history: JSON.parse(localStorage.getItem('yt_history')) || [],
        liked: JSON.parse(localStorage.getItem('yt_liked')) || [],
        currentVideo: null
    };

    // 1. App Initialization
    function initApp() {
        const name = document.getElementById('userName').value || 'User';
        state.user.name = name;
        document.getElementById('userInitials').innerText = name[0].toUpperCase();
        document.getElementById('largeProfileIcon').innerText = name[0].toUpperCase();
        document.getElementById('profileNameDisplay').innerText = name;
        
        document.getElementById('authSection').style.display = 'none';
        fetchVideos("Latest coding projects 2024");
    }

    // 2. YouTube API Player Setup
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('ytPlayer', {
            height: '100%', width: '100%',
            videoId: '',
            playerVars: { 'autoplay': 1, 'rel': 0 }
        });
    }

    // 3. Navigation Engine (The "Heart" of the working features)
    function showSection(section) {
        // Reset Views
        document.getElementById('videoGrid').classList.add('hidden');
        document.getElementById('shortsGrid').classList.add('hidden');
        document.getElementById('profileSection').classList.add('hidden');
        document.getElementById('playerSection').style.display = 'none';
        document.getElementById('sectionTitle').classList.remove('d-none');
        
        // UI Highlight
        document.querySelectorAll('.sidebar-item').forEach(el => el.classList.remove('active'));
        
        if (section === 'home') {
            document.getElementById('videoGrid').classList.remove('hidden');
            document.getElementById('sectionTitle').classList.add('d-none');
            fetchVideos("New technology 2024");
        } 
        else if (section === 'shorts') {
            document.getElementById('shortsGrid').classList.remove('hidden');
            document.getElementById('sectionTitle').querySelector('h4').innerText = "Shorts";
            loadShorts();
        }
        else if (section === 'history') {
            document.getElementById('videoGrid').classList.remove('hidden');
            document.getElementById('sectionTitle').querySelector('h4').innerText = "Watch History";
            renderList(state.history);
        }
        else if (section === 'liked') {
            document.getElementById('videoGrid').classList.remove('hidden');
            document.getElementById('sectionTitle').querySelector('h4').innerText = "Liked Videos";
            renderList(state.liked);
        }
        else if (section === 'profile' || section === 'settings') {
            document.getElementById('profileSection').classList.remove('hidden');
            document.getElementById('sectionTitle').querySelector('h4').innerText = "Account Settings";
        }
    }

    // 4. Data Fetching
    async function fetchVideos(query) {
        if(API_KEY === 'YOUR_API_KEY_HERE') {
            alert("Please add your YouTube API Key in the script tag to fetch real data!");
            return;
        }
        try {
            const resp = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=12&q=${query}&type=video&key=${API_KEY}`);
            const data = await resp.json();
            renderList(data.items);
        } catch (e) { console.error("API Error", e); }
    }

    // 5. Rendering Logic
    function renderList(videos) {
        const grid = document.getElementById('videoGrid');
        grid.innerHTML = videos.length ? '' : '<p class="text-center w-100 py-5">No videos found here yet.</p>';
        
        videos.forEach(v => {
            const id = v.id?.videoId || v.id;
            const snippet = v.snippet;
            const card = document.createElement('div');
            card.className = 'col';
            card.innerHTML = `
                <div class="video-card" onclick="playVideo('${id}', '${snippet.title.replace(/'/g, "")}', '${snippet.channelTitle}')">
                    <div class="thumb-wrapper mb-2">
                        <img src="${snippet.thumbnails.medium.url}" class="thumb-img">
                    </div>
                    <div class="d-flex gap-2">
                        <div class="rounded-circle bg-secondary flex-shrink-0" style="width: 36px; height: 36px;"></div>
                        <div>
                            <h6 class="mb-1 fw-bold small text-truncate-2">${snippet.title}</h6>
                            <p class="mb-0 text-secondary small">${snippet.channelTitle}</p>
                        </div>
                    </div>
                </div>
            `;
            grid.appendChild(card);
        });
    }

    function loadShorts() {
        const container = document.getElementById('shortsGrid');
        container.innerHTML = '';
        const mockShorts = ['rIpxW9Vq_yQ', '5_X8SRe8fLc', 'dQw4w9WgXcQ']; // Example IDs
        
        mockShorts.forEach(id => {
            const div = document.createElement('div');
            div.className = 'short-card shadow-lg';
            div.innerHTML = `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${id}?autoplay=0&controls=0" frameborder="0"></iframe>`;
            container.appendChild(div);
        });
    }

    // 6. Video Player & Systems (History & Like)
    function playVideo(id, title, channel) {
        state.currentVideo = { id, snippet: { title, channelTitle: channel, thumbnails: { medium: { url: `https://img.youtube.com/vi/${id}/mqdefault.jpg` } } } };
        
        // Add to History
        if(!state.history.find(v => v.id === id)) {
            state.history.unshift(state.currentVideo);
            localStorage.setItem('yt_history', JSON.stringify(state.history.slice(0, 20)));
        }

        document.getElementById('playerSection').style.display = 'block';
        document.getElementById('currentTitle').innerText = title;
        document.getElementById('currentChannel').innerText = channel;
        player.loadVideoById(id);
        window.scrollTo({ top: 0, behavior: 'smooth' });

        // Update Like UI
        const isLiked = state.liked.find(v => v.id === id);
        document.getElementById('likeIcon').className = isLiked ? 'bi bi-hand-thumbs-up-fill text-primary' : 'bi bi-hand-thumbs-up';
    }

    function toggleLike() {
        if(!state.currentVideo) return;
        const index = state.liked.findIndex(v => v.id === state.currentVideo.id);
        
        if(index === -1) {
            state.liked.push(state.currentVideo);
            document.getElementById('likeIcon').className = 'bi bi-hand-thumbs-up-fill text-primary';
        } else {
            state.liked.splice(index, 1);
            document.getElementById('likeIcon').className = 'bi bi-hand-thumbs-up';
        }
        localStorage.setItem('yt_liked', JSON.stringify(state.liked));
    }

    function handleSearch() {
        const q = document.getElementById('searchInput').value;
        if(q) {
            showSection('home');
            fetchVideos(q);
        }
    }
</script>
</body>
</html>